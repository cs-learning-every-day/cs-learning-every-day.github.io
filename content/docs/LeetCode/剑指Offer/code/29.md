> [Link](https://leetcode.cn/problems/shun-shi-zhen-da-yin-ju-zhen-lcof/)


```c++
    vector<int> spiralOrder(vector<vector<int>>& matrix) {
        if (matrix.size() == 0) return {};

        int m = matrix.size(), n = matrix[0].size();
        vector<int> res(m * n);
        vector<vector<bool>> st(m, vector(n, false));

        int dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};
        int dir = 0;
        for (int i = 0, x = 0, y = 0; i < m * n; i++) {
            res[i] = matrix[x][y];
            st[x][y] = true;

            int nx = x + dx[dir], ny = y + dy[dir];
            if (nx < 0 || ny < 0 || nx >= m || ny >= n || st[nx][ny]) {
                dir = (dir + 1) % 4;
                nx = x + dx[dir]; ny = y + dy[dir];
            }
            x = nx; y = ny;
        }
        return res;
    }
```