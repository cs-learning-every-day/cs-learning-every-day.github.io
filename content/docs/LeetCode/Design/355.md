> [Link](https://leetcode-cn.com/problems/design-twitter/)

```java
class Twitter {
    private Map<Integer, List<Integer>> follows;
    private Map<Integer, PriorityQueue<Integer>> tweets;
    private static final AtomicInteger ai = new AtomicInteger(0);
    private static final Map<Integer, Integer> orders = new HashMap<>();

    
    public Twitter() {
        follows = new HashMap<>();
        tweets = new HashMap<>();
    }
    
    public void postTweet(int userId, int tweetId) {
        PriorityQueue<Integer> tmp = tweets.get(userId);
        if (tmp == null) {
            tmp = new PriorityQueue<Integer>((a, b) -> b - a);
            tweets.put(userId, tmp);
        }
        int key = ai.incrementAndGet();
        orders.put(key, tweetId);
        tmp.offer(key);
    }
    
    public List<Integer> getNewsFeed(int userId) {
        List<Integer> followees = follows.get(userId);
        PriorityQueue<Integer> tmp = new PriorityQueue<>();

        if (followees != null) {
            for (int followeeId : followees) {
                PriorityQueue<Integer> t = tweets.get(followeeId);
                if (t != null) {
                    updateTop10Data(t, tmp);
                }
            }
        } else {
            PriorityQueue<Integer> t = tweets.get(userId);
            if (t != null) {
                updateTop10Data(t, tmp);
            }
        }

        List<Integer> res = new LinkedList<>();
        while (tmp.size() > 0) {
            res.add(0, orders.get(tmp.poll()));
        }
        return res;
    }

    private void updateTop10Data(PriorityQueue<Integer> data, PriorityQueue<Integer> res) {
        for (int d : data) {
            if (res.size() >= 10) {
                if (res.peek() < d) {
                    res.poll();
                    res.offer(d);
                }
            } else {
                res.offer(d);
            }
        }
    }
    
    public void follow(int followerId, int followeeId) {
        List<Integer> tmp = follows.get(followerId);
        if (tmp == null) {
            tmp = new ArrayList<>();
            tmp.add(followerId);
            follows.put(followerId, tmp);
        }
        if (tmp.contains(followeeId)) {
            return;
        }
        tmp.add(followeeId);
    }
    
    public void unfollow(int followerId, int followeeId) {
        List<Integer> tmp = follows.get(followerId);
        if (tmp == null) {
            return;
        }
        tmp.remove(new Integer(followeeId));
    }
}
```