> [Link](https://leetcode-cn.com/problems/random-flip-matrix/)


```java
class Solution {
    private int m;
    private int n;
    private int count;
    private Map<Integer, Integer> map;
    
    /**
        转成一维数组 索引i 相当于=> [i/n][i%n]，并用Map只记录被选中的信息（思路类似384，但是保存所有数会超出内存限制）:
    case1:               case2:
        1 2 3 4 {5} 6        1 2 3 {4} 5
        => 5                 => 4
        map[5] = 6           map[4] = 5

        1 2 3 4 {5}          1 2 {3} 4
        => 6                 => 3
        map[5] = 4           map[3] = map[4] = 5

        ...                  ...
        
     */
    public Solution(int m, int n) {
        this.m = m;
        this.n = n;
        this.count = 0;
        this.map = new HashMap<>();
    }
    
    public int[] flip() {
        int k = (int)(Math.random() * (m * n - count));

        
        int res = 0;
        if (map.get(k) == null) {
            res = k;
        } else {
            res = map.get(k);
        }
        int lastIdx = m * n - count - 1; 
        if (map.get(lastIdx) != null) {
            map.put(k, map.get(lastIdx));
        } else {
            map.put(k, lastIdx);
        }

        count++;
        return new int[]{res / n, res % n};
    }
    
    public void reset() {
        map.clear();
        count = 0;
    }
}

/**
 * Your Solution object will be instantiated and called as such:
 * Solution obj = new Solution(m, n);
 * int[] param_1 = obj.flip();
 * obj.reset();
 */
```